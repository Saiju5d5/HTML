<script>
const API_KEY = "YOUR_OPENAI_API_KEY"; // replace with your key

const chatbotBtn = document.querySelector(".chatbot-btn");
const chatbotWindow = document.querySelector(".chatbot-window");
const closeBtn = document.querySelector(".chatbot-close");
const sendBtn = document.querySelector(".chatbot-send");
const inputField = document.querySelector(".chatbot-input");
const messagesDiv = document.querySelector(".chatbot-messages");

chatbotBtn.addEventListener("click", () => {
  chatbotWindow.style.display = "flex";
});
closeBtn.addEventListener("click", () => {
  chatbotWindow.style.display = "none";
});

sendBtn.addEventListener("click", async () => {
  const userMsg = inputField.value.trim();
  if (!userMsg) return;

  addMessage(userMsg, "user-msg-bubble");
  inputField.value = "";

  const response = await fetch("https://api.openai.com/v1/chat/completions", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
      "Authorization": `Bearer ${API_KEY}`
    },
    body: JSON.stringify({
      model: "gpt-3.5-turbo",
      messages: [{ role: "user", content: userMsg }]
    })
  });

  const data = await response.json();
  const botMsg = data.choices[0].message.content;
  addMessage(botMsg, "bot-msg-bubble");
});

function addMessage(text, className) {
  const bubble = document.createElement("div");
  bubble.className = className;
  bubble.innerText = text;
  messagesDiv.appendChild(bubble);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
}
</script>
